-- MySQL Script generated by MySQL Workbench
-- Wed May 16 23:00:02 2018
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL,ALLOW_INVALID_DATES';

-- -----------------------------------------------------
-- Schema virtual_library
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema virtual_library
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `virtual_library` DEFAULT CHARACTER SET utf8 ;
USE `virtual_library` ;

-- -----------------------------------------------------
-- Table `virtual_library`.`authors`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`authors` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`authors` (
  `idauthors` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `last_name` VARCHAR(45) NOT NULL,
  `birth_date` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idauthors`))
ENGINE = InnoDB
AUTO_INCREMENT = 4
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`users`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`users` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`users` (
  `idusers` INT(11) NOT NULL AUTO_INCREMENT,
  `email` VARCHAR(45) NOT NULL,
  `password` VARCHAR(45) NOT NULL,
  `sex` ENUM('F', 'M') NULL DEFAULT NULL,
  `username` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idusers`),
  UNIQUE INDEX `email_UNIQUE` (`email` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`marks`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`marks` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`marks` (
  `idmarks` INT(11) NOT NULL AUTO_INCREMENT,
  `value` TINYINT(1) NOT NULL,
  PRIMARY KEY (`idmarks`),
  UNIQUE INDEX `value_UNIQUE` (`value` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`categories`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`categories` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`categories` (
  `idcategories` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL DEFAULT NULL,
  PRIMARY KEY (`idcategories`))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`books`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`books` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`books` (
  `idbooks` INT(11) NOT NULL AUTO_INCREMENT,
  `id_author` INT(11) NOT NULL,
  `title` VARCHAR(45) NOT NULL,
  `publish_date` VARCHAR(45) NOT NULL,
  `ISBN` INT(11) NOT NULL,
  `publisher` VARCHAR(45) NULL,
  `add_date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  `synopsis` MEDIUMTEXT NOT NULL,
  `image` VARCHAR(45) NOT NULL,
  `text` VARCHAR(45) NULL DEFAULT NULL,
  `category` INT(11) NOT NULL,
  `mark` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idbooks`),
  INDEX `B_1_idx` (`id_author` ASC),
  INDEX `B_3_idx` (`category` ASC),
  CONSTRAINT `B_1`
    FOREIGN KEY (`id_author`)
    REFERENCES `virtual_library`.`authors` (`idauthors`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `B_3`
    FOREIGN KEY (`category`)
    REFERENCES `virtual_library`.`categories` (`idcategories`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`book_marks`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`book_marks` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`book_marks` (
  `idbook_marks` INT(11) NOT NULL AUTO_INCREMENT,
  `id_book` INT(11) NOT NULL,
  `id_mark` INT(11) NOT NULL,
  `id_user` INT(11) NOT NULL,
  `date` TIMESTAMP NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`idbook_marks`),
  INDEX `BM_1_idx` (`id_user` ASC),
  INDEX `BM_2_idx` (`id_mark` ASC),
  INDEX `BM_3_idx` (`id_book` ASC),
  CONSTRAINT `BM_1`
    FOREIGN KEY (`id_user`)
    REFERENCES `virtual_library`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `BM_2`
    FOREIGN KEY (`id_mark`)
    REFERENCES `virtual_library`.`marks` (`idmarks`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `BM_3`
    FOREIGN KEY (`id_book`)
    REFERENCES `virtual_library`.`books` (`idbooks`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`series`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`series` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`series` (
  `idseries` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NOT NULL,
  `id_author` INT(11) NOT NULL,
  `vol_number` TINYINT(1) NULL DEFAULT NULL,
  PRIMARY KEY (`idseries`),
  INDEX `S_1_idx` (`id_author` ASC),
  CONSTRAINT `S_1`
    FOREIGN KEY (`id_author`)
    REFERENCES `virtual_library`.`authors` (`idauthors`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`book_series`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`book_series` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`book_series` (
  `idbook_series` INT(11) NOT NULL AUTO_INCREMENT,
  `id_series` INT(11) NOT NULL,
  `id_book` INT(11) NOT NULL,
  `vol_number` TINYINT(1) NOT NULL,
  PRIMARY KEY (`idbook_series`),
  INDEX `BS_1_idx` (`id_series` ASC),
  INDEX `BS_2_idx` (`id_book` ASC),
  CONSTRAINT `BS_1`
    FOREIGN KEY (`id_series`)
    REFERENCES `virtual_library`.`series` (`idseries`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `BS_2`
    FOREIGN KEY (`id_book`)
    REFERENCES `virtual_library`.`books` (`idbooks`)
    ON DELETE CASCADE
    ON UPDATE CASCADE)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`status` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`status` (
  `idstatus` INT(11) NOT NULL AUTO_INCREMENT,
  `status` VARCHAR(45) NOT NULL,
  PRIMARY KEY (`idstatus`),
  UNIQUE INDEX `status_UNIQUE` (`status` ASC))
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


-- -----------------------------------------------------
-- Table `virtual_library`.`book_status`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `virtual_library`.`book_status` ;

CREATE TABLE IF NOT EXISTS `virtual_library`.`book_status` (
  `idbook_status` INT(11) NOT NULL AUTO_INCREMENT,
  `id_book` INT(11) NOT NULL,
  `id_user` INT(11) NOT NULL,
  `id_status` INT(11) NOT NULL,
  `page_number` INT(11) NULL DEFAULT NULL,
  PRIMARY KEY (`idbook_status`),
  INDEX `BSTAT_1_idx` (`id_status` ASC),
  INDEX `BSTAT_2_idx` (`id_book` ASC),
  INDEX `BSTAT_3_idx` (`id_user` ASC),
  CONSTRAINT `BSTAT_1`
    FOREIGN KEY (`id_status`)
    REFERENCES `virtual_library`.`status` (`idstatus`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `BSTAT_2`
    FOREIGN KEY (`id_book`)
    REFERENCES `virtual_library`.`books` (`idbooks`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `BSTAT_3`
    FOREIGN KEY (`id_user`)
    REFERENCES `virtual_library`.`users` (`idusers`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB
DEFAULT CHARACTER SET = utf8;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;

-- -----------------------------------------------------
-- Data for table `virtual_library`.`authors`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (1, 'Bram', 'Stoker', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (2, 'Lewis', 'Carol', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (3, 'Karol', 'Dickens', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (4, 'Stephanie', 'Meyer', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (5, 'J.K.', 'Rowling', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (6, 'Patricia', 'Briggs', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (7, 'Ilona', 'Andrews', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (8, 'Aneta', 'Jadowska', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (9, 'Bolesław', 'Leśmian', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (10, 'Mark', 'Twain', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (11, 'Maria', 'Konopnicka', NULL);
INSERT INTO `virtual_library`.`authors` (`idauthors`, `name`, `last_name`, `birth_date`) VALUES (12, 'Henryk', 'Sienkiewicz', NULL);

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`users`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`users` (`idusers`, `email`, `password`, `sex`, `username`) VALUES (1, 'anna.pol@wp.pl', 'qwerty', 'F', 'Ania');
INSERT INTO `virtual_library`.`users` (`idusers`, `email`, `password`, `sex`, `username`) VALUES (2, 'karol_graczyk', 'qwerty', 'M', 'Karolek');

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`marks`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (1, 0);
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (2, 1);
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (3, 2);
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (4, 3);
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (5, 4);
INSERT INTO `virtual_library`.`marks` (`idmarks`, `value`) VALUES (6, 5);

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`categories`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (1, 'urban fantasy');
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (2, 'fantasy');
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (3, 'romans');
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (4, 'historical');
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (5, 'literature');
INSERT INTO `virtual_library`.`categories` (`idcategories`, `name`) VALUES (6, 'criminal');

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`books`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`books` (`idbooks`, `id_author`, `title`, `publish_date`, `ISBN`, `publisher`, `add_date`, `synopsis`, `image`, `text`, `category`, `mark`) VALUES (1, 1, 'Dracula', 'May 12th 1986', 9780393970128, 'Norton', NULL, 'A true masterwork of storytelling, Dracula has transcended generation, language, and culture to become one of the most popular novels ever written. It is a quintessential tale of suspense and horror, boasting one of the most terrifying characters ever born in literature: Count Dracula, a tragic, night-dwelling specter who feeds upon the blood of the living, and whose diabolical passions prey upon the innocent, the helpless, and the beautiful.', 'img/Dracula_by_Bram_Stoker.jpg', 'src/Dracula _Bram_Stoker.pdf', 5, 0);
INSERT INTO `virtual_library`.`books` (`idbooks`, `id_author`, `title`, `publish_date`, `ISBN`, `publisher`, `add_date`, `synopsis`, `image`, `text`, `category`, `mark`) VALUES (2, 2, 'Alice in Wonderland', '7th 2004',  9781904808169, ' Public Domain Books', NULL, 'After a tumble down the rabbit hole, Alice finds herself far away from home in the absurd world of Wonderland. As mind-bending as it is delightful, Lewis Carroll’s 1865 novel is pure magic for young and old alike.', 'img/Alice_in_Wonderland_by_Lewis_Carroll.jpg', 'src/Alices_Adventures_in_Wonderland_Lewis Carroll.pdf', 5, 0);
INSERT INTO `virtual_library`.`books` (`idbooks`, `id_author`, `title`, `publish_date`, `ISBN`, `publisher`, `add_date`, `synopsis`, `image`, `text`, `category`, `mark`) VALUES (3, 2, 'Through the Looking-Glass and What Alice Found There', ' April 23rd 1993', 9780688120498, 'Books of Wonder', NULL, 'Nothing is quite what it seems once Alice journeys through the looking-glass, and Dodgson\'s wit is infectious as he explores concepts of mirror imagery, time running backward, and strategies of chess-all wrapped up in the exploits of a spirited young girl who parries with the Red Queen, Tweedledee and Tweedledum, and other unlikely characters. In many ways, this sequel has had an even greater impact on today\'s pop culture than the first book. ', 'img/Through_the_Looking-Glass_by_Lewis_Carroll.jpg', 'src/Through_the_Looking-Glass_Lewis_Carroll.pdf', 5, 0);

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`series`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (1, 'Twilight', 4, 4);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (2, 'Alice\'s Adventures in Wonderland', 2, 2);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (3, 'Mercy Thompson series', 6, 10);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (4, 'Hidden Legacy series', 7, 3);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (5, 'Tryogia', 12, 3);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (6, 'Harry Potter', 5, 7);
INSERT INTO `virtual_library`.`series` (`idseries`, `name`, `id_author`, `vol_number`) VALUES (7, 'Heksalogia o wiedźmie', 8, 6);

COMMIT;


-- -----------------------------------------------------
-- Data for table `virtual_library`.`status`
-- -----------------------------------------------------
START TRANSACTION;
USE `virtual_library`;
INSERT INTO `virtual_library`.`status` (`idstatus`, `status`) VALUES (1, 'read');
INSERT INTO `virtual_library`.`status` (`idstatus`, `status`) VALUES (2, 'to_read');
INSERT INTO `virtual_library`.`status` (`idstatus`, `status`) VALUES (3, 'in_progress');

COMMIT;

